<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas
      onclick="jump()"
      width="500"
      height="500"
      style="border: 1px solid black;"
      id="canvas"
    ></canvas>
  </body>

  <script>
    const cs = document.getElementById("canvas");
    const ctx = cs.getContext("2d");
    const width = cs.width;
    const height = cs.height;
    console.log(width, height);

    let x = width;
    let y = height;

    let speedY = 0.01 * canvas.height;
    let gravity = 0.0003 * canvas.height;

    const draw = () => {
      ctx.clearRect(0, 0, innerWidth, innerHeight);
      ctx.fillRect(50, y - 50, 50, 50);
      ctx.fillRect(x - 50, height - 50, 50, 50);
    };

    let jumpDown = false;
    let jumpUp = true;

    // const intr = setInterval(() => {
    //   --x;

    //   if (jumpUp) {
    //     y -= speedY;
    //     speedY -= gravity;

    //     if (speedY < 0) {
    //       jumpDown = true;
    //       jumpUp = false;
    //     }
    //   }
    //   if (jumpDown) {
    //     y += speedY;
    //     speedY += gravity;
    //     console.log(Math.floor(y));
    //     if (Math.floor(y) >= height - 5) {
    //       jumpDown = false;
    //     }
    //   }
    //   draw();
    // }, 50);
    const jump = () => {
      setInterval(() => {
        --x;

        if (jumpUp) {
          y -= speedY;
          speedY -= gravity;

          if (speedY < 0) {
            jumpDown = true;
            jumpUp = false;
          }
        }
        if (jumpDown) {
          y += speedY;
          speedY += gravity;
          console.log(Math.floor(y));
          if (Math.floor(y) >= height - 5) {
            jumpDown = false;
          }
        }
        draw();
      }, 50);
    };
  </script>
</html>
